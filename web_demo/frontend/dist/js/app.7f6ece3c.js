(function(){"use strict";var e={369:function(e,t,l){var i=l(130),a=l(768);const s={id:"app"},n={style:{display:"flex","align-items":"center",height:"64px"}};function o(e,t,l,i,o,r){const d=(0,a.g2)("home-outlined"),u=(0,a.g2)("a-menu-item"),c=(0,a.g2)("picture-outlined"),g=(0,a.g2)("folder-open-outlined"),p=(0,a.g2)("a-menu"),f=(0,a.g2)("a-layout-header"),h=(0,a.g2)("router-view"),b=(0,a.g2)("a-layout-content"),m=(0,a.g2)("a-layout-footer"),k=(0,a.g2)("a-layout");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(k,{style:{"min-height":"100vh"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"0 50px"}},{default:(0,a.k6)(()=>[(0,a.Lk)("div",n,[t[6]||(t[6]=(0,a.Lk)("div",{style:{color:"white","font-size":"24px","font-weight":"bold","margin-right":"50px"}},[(0,a.Lk)("span",{style:{"margin-right":"8px"}},"🧵"),(0,a.eW)(" 面料智能分类系统 ")],-1)),(0,a.bF)(p,{mode:"horizontal","selected-keys":[r.currentRoute],style:{background:"transparent","border-bottom":"none",flex:"1"},theme:"dark"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{key:"/",onClick:t[0]||(t[0]=t=>e.$router.push("/"))},{icon:(0,a.k6)(()=>[(0,a.bF)(d)]),default:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.eW)(" 首页 ",-1))]),_:1}),(0,a.bF)(u,{key:"/single",onClick:t[1]||(t[1]=t=>e.$router.push("/single"))},{icon:(0,a.k6)(()=>[(0,a.bF)(c)]),default:(0,a.k6)(()=>[t[4]||(t[4]=(0,a.eW)(" 单图识别 ",-1))]),_:1}),(0,a.bF)(u,{key:"/batch",onClick:t[2]||(t[2]=t=>e.$router.push("/batch"))},{icon:(0,a.k6)(()=>[(0,a.bF)(g)]),default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.eW)(" 批量识别 ",-1))]),_:1})]),_:1},8,["selected-keys"])])]),_:1}),(0,a.bF)(b,{style:{padding:"24px",background:"#f0f2f5"}},{default:(0,a.k6)(()=>[(0,a.bF)(h)]),_:1}),(0,a.bF)(m,{style:{"text-align":"center",background:"#001529",color:"rgba(255,255,255,0.65)"}},{default:(0,a.k6)(()=>[...t[7]||(t[7]=[(0,a.eW)(" 面料智能分类系统 ©2024 基于深度学习的纺织品识别技术 ",-1)])]),_:1})]),_:1})])}var r=l(43),d=l(755),u=l(20),c={name:"App",components:{HomeOutlined:r.A,PictureOutlined:d.A,FolderOpenOutlined:u.A},computed:{currentRoute(){return this.$route.path}}},g=l(241);const p=(0,g.A)(c,[["render",o]]);var f=p,h=l(387),b=l(232);const m={style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"80px 0",margin:"-24px -24px 40px -24px","text-align":"center",color:"white"}},k={style:{color:"#666","margin-bottom":"16px"}};function y(e,t,l,i,s,n){const o=(0,a.g2)("picture-outlined"),r=(0,a.g2)("a-button"),d=(0,a.g2)("folder-open-outlined"),u=(0,a.g2)("a-space"),c=(0,a.g2)("a-card-meta"),g=(0,a.g2)("a-card"),p=(0,a.g2)("a-col"),f=(0,a.g2)("a-row"),h=(0,a.g2)("a-tag"),y=(0,a.g2)("a-empty"),F=(0,a.g2)("a-spin"),v=(0,a.g2)("a-statistic");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",m,[t[4]||(t[4]=(0,a.Lk)("h1",{style:{"font-size":"48px","margin-bottom":"20px","font-weight":"300"}},[(0,a.Lk)("span",{style:{"margin-right":"16px"}},"🧵"),(0,a.eW)(" 面料智能分类系统 ")],-1)),t[5]||(t[5]=(0,a.Lk)("p",{style:{"font-size":"20px","margin-bottom":"40px",opacity:"0.9"}}," 基于深度学习的纺织品自动识别与分类平台 ",-1)),(0,a.bF)(u,{size:"large"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{type:"primary",size:"large",onClick:t[0]||(t[0]=t=>e.$router.push("/single")),style:{height:"50px",padding:"0 30px","font-size":"16px"}},{icon:(0,a.k6)(()=>[(0,a.bF)(o)]),default:(0,a.k6)(()=>[t[2]||(t[2]=(0,a.eW)(" 开始单图识别 ",-1))]),_:1}),(0,a.bF)(r,{size:"large",onClick:t[1]||(t[1]=t=>e.$router.push("/batch")),style:{height:"50px",padding:"0 30px","font-size":"16px",background:"rgba(255,255,255,0.2)","border-color":"rgba(255,255,255,0.4)",color:"white"}},{icon:(0,a.k6)(()=>[(0,a.bF)(d)]),default:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.eW)(" 批量识别 ",-1))]),_:1})]),_:1})]),(0,a.bF)(f,{gutter:[32,32],style:{"margin-bottom":"60px"}},{default:(0,a.k6)(()=>[(0,a.bF)(p,{xs:24,md:8},{default:(0,a.k6)(()=>[(0,a.bF)(g,{hoverable:"",style:{"text-align":"center",height:"100%"}},{cover:(0,a.k6)(()=>[...t[6]||(t[6]=[(0,a.Lk)("div",{style:{padding:"40px","font-size":"64px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"}}," 🎯 ",-1)])]),default:(0,a.k6)(()=>[(0,a.bF)(c,{title:"高精度识别",description:"基于ResNet50深度学习模型，识别准确率超过85%，支持多种面料类型的精确分类"})]),_:1})]),_:1}),(0,a.bF)(p,{xs:24,md:8},{default:(0,a.k6)(()=>[(0,a.bF)(g,{hoverable:"",style:{"text-align":"center",height:"100%"}},{cover:(0,a.k6)(()=>[...t[7]||(t[7]=[(0,a.Lk)("div",{style:{padding:"40px","font-size":"64px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"}}," ⚡ ",-1)])]),default:(0,a.k6)(()=>[(0,a.bF)(c,{title:"快速响应",description:"GPU加速推理，单张图片识别时间小于1秒，支持批量处理提升工作效率"})]),_:1})]),_:1}),(0,a.bF)(p,{xs:24,md:8},{default:(0,a.k6)(()=>[(0,a.bF)(g,{hoverable:"",style:{"text-align":"center",height:"100%"}},{cover:(0,a.k6)(()=>[...t[8]||(t[8]=[(0,a.Lk)("div",{style:{padding:"40px","font-size":"64px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"}}," 🔧 ",-1)])]),default:(0,a.k6)(()=>[(0,a.bF)(c,{title:"专业易用",description:"直观的Web界面，支持拖拽上传，实时预览结果，无需专业技术背景即可使用"})]),_:1})]),_:1})]),_:1}),(0,a.bF)(g,{title:"可用模型",style:{"margin-bottom":"40px"}},{extra:(0,a.k6)(()=>[(0,a.bF)(h,{color:"processing"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)(s.models.length)+" 个模型可用",1)]),_:1})]),default:(0,a.k6)(()=>[(0,a.bF)(F,{spinning:s.loading},{default:(0,a.k6)(()=>[s.models.length>0?((0,a.uX)(),(0,a.Wv)(f,{key:0,gutter:[24,24]},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.models,e=>((0,a.uX)(),(0,a.Wv)(p,{xs:24,lg:8,key:e.id},{default:(0,a.k6)(()=>[(0,a.bF)(g,{size:"small",hoverable:""},{title:(0,a.k6)(()=>[(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.bF)(h,{color:"binary"===e.type?"blue":"green"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)("binary"===e.type?"二分类":"多分类"),1)]),_:2},1032,["color"]),(0,a.eW)(" "+(0,b.v_)(e.name),1)]),_:2},1024)]),default:(0,a.k6)(()=>[(0,a.Lk)("p",k,(0,b.v_)(e.description),1),(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.bF)(r,{type:"primary",size:"small",onClick:t=>n.useModel(e,"single")},{default:(0,a.k6)(()=>[...t[9]||(t[9]=[(0,a.eW)(" 单图识别 ",-1)])]),_:1},8,["onClick"]),(0,a.bF)(r,{size:"small",onClick:t=>n.useModel(e,"batch")},{default:(0,a.k6)(()=>[...t[10]||(t[10]=[(0,a.eW)(" 批量识别 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):((0,a.uX)(),(0,a.Wv)(y,{key:1,description:"暂无可用模型"}))]),_:1},8,["spinning"])]),_:1}),(0,a.bF)(f,{gutter:[32,32]},{default:(0,a.k6)(()=>[(0,a.bF)(p,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(v,{title:"支持面料类型",value:19,suffix:"种"})]),_:1}),(0,a.bF)(p,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(v,{title:"训练样本数量",value:5e3,suffix:"+"})]),_:1}),(0,a.bF)(p,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(v,{title:"平均识别准确率",value:85.2,suffix:"%"})]),_:1}),(0,a.bF)(p,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(v,{title:"平均响应时间",value:.8,suffix:"秒"})]),_:1})]),_:1})])}var F=l(373),v={name:"Home",components:{PictureOutlined:d.A,FolderOpenOutlined:u.A},data(){return{models:[],loading:!1}},mounted(){this.loadModels()},methods:{async loadModels(){this.loading=!0;try{const e=await F.A.get("/api/models");this.models=e.data.models}catch(e){this.$message.error("加载模型失败: "+e.message)}finally{this.loading=!1}},useModel(e,t){this.$router.push({path:`/${t}`,query:{model:e.id}})}}};const x=(0,g.A)(v,[["render",y]]);var _=x;const C={key:0,style:{"margin-top":"8px",color:"#666","font-size":"14px"}},L={key:0,style:{padding:"40px"}},M={class:"ant-upload-drag-icon"},w={key:1,style:{position:"relative"}},W=["src"],z={style:{"margin-top":"16px","text-align":"center"}},O={key:0,style:{"text-align":"center",padding:"60px 20px",color:"#999"}},$={key:0};function A(e,t,l,s,n,o){const r=(0,a.g2)("a-page-header"),d=(0,a.g2)("a-tag"),u=(0,a.g2)("a-space"),c=(0,a.g2)("a-select-option"),g=(0,a.g2)("a-select"),p=(0,a.g2)("a-card"),f=(0,a.g2)("inbox-outlined"),h=(0,a.g2)("delete-outlined"),m=(0,a.g2)("a-button"),k=(0,a.g2)("a-upload-dragger"),y=(0,a.g2)("thunderbolt-outlined"),F=(0,a.g2)("a-col"),v=(0,a.g2)("picture-outlined"),x=(0,a.g2)("a-alert"),_=(0,a.g2)("a-progress"),A=(0,a.g2)("a-list-item-meta"),E=(0,a.g2)("a-list-item"),X=(0,a.g2)("a-list"),D=(0,a.g2)("a-divider"),P=(0,a.g2)("a-descriptions-item"),U=(0,a.g2)("a-descriptions"),I=(0,a.g2)("a-spin"),j=(0,a.g2)("a-row");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(r,{title:"单图识别","sub-title":"上传单张面料图片进行智能分类识别",onBack:t[0]||(t[0]=t=>e.$router.go(-1))}),(0,a.bF)(j,{gutter:32},{default:(0,a.k6)(()=>[(0,a.bF)(F,{xs:24,lg:12},{default:(0,a.k6)(()=>[(0,a.bF)(p,{title:"选择模型",style:{"margin-bottom":"24px"}},{default:(0,a.k6)(()=>[(0,a.bF)(g,{value:n.selectedModel,"onUpdate:value":t[1]||(t[1]=e=>n.selectedModel=e),placeholder:"请选择识别模型",style:{width:"100%"},onChange:o.onModelChange},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.models,e=>((0,a.uX)(),(0,a.Wv)(c,{key:e.id,value:e.id},{default:(0,a.k6)(()=>[(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.bF)(d,{color:"binary"===e.type?"blue":"green",size:"small"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)("binary"===e.type?"二分类":"多分类"),1)]),_:2},1032,["color"]),(0,a.eW)(" "+(0,b.v_)(e.name),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"]),o.currentModelInfo?((0,a.uX)(),(0,a.CE)("p",C,(0,b.v_)(o.currentModelInfo.description),1)):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(p,{title:"上传图片"},{default:(0,a.k6)(()=>[(0,a.bF)(k,{fileList:n.fileList,"onUpdate:fileList":t[2]||(t[2]=e=>n.fileList=e),"before-upload":o.beforeUpload,"show-upload-list":!1,accept:"image/*",onChange:o.handleUpload},{default:(0,a.k6)(()=>[n.imageUrl?((0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("img",{src:n.imageUrl,style:{"max-width":"100%","max-height":"300px","object-fit":"contain"}},null,8,W),(0,a.bF)(m,{type:"primary",danger:"",size:"small",style:{position:"absolute",top:"8px",right:"8px"},onClick:(0,i.D$)(o.clearImage,["stop"])},{icon:(0,a.k6)(()=>[(0,a.bF)(h)]),_:1},8,["onClick"])])):((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("p",M,[(0,a.bF)(f,{style:{"font-size":"48px",color:"#1890ff"}})]),t[3]||(t[3]=(0,a.Lk)("p",{class:"ant-upload-text"},"点击或拖拽图片到此区域上传",-1)),t[4]||(t[4]=(0,a.Lk)("p",{class:"ant-upload-hint"},"支持 JPG、PNG、BMP、WEBP 格式",-1))]))]),_:1},8,["fileList","before-upload","onChange"]),(0,a.Lk)("div",z,[(0,a.bF)(m,{type:"primary",size:"large",loading:n.predicting,disabled:!n.imageUrl||!n.selectedModel,onClick:o.predict},{icon:(0,a.k6)(()=>[(0,a.bF)(y)]),default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.eW)(" 开始识别 ",-1))]),_:1},8,["loading","disabled","onClick"])])]),_:1})]),_:1}),(0,a.bF)(F,{xs:24,lg:12},{default:(0,a.k6)(()=>[(0,a.bF)(p,{title:"识别结果"},{default:(0,a.k6)(()=>[n.result||n.predicting?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",O,[(0,a.bF)(v,{style:{"font-size":"64px","margin-bottom":"16px"}}),t[6]||(t[6]=(0,a.Lk)("p",null,"请上传图片并选择模型进行识别",-1))])),(0,a.bF)(I,{spinning:n.predicting,style:{width:"100%"}},{default:(0,a.k6)(()=>[n.result?((0,a.uX)(),(0,a.CE)("div",$,[(0,a.bF)(x,{type:n.result.predictions[0].confidence>.8?"success":n.result.predictions[0].confidence>.6?"warning":"info",message:`识别结果: ${n.result.predictions[0].class}`,description:`置信度: ${(100*n.result.predictions[0].confidence).toFixed(1)}%`,"show-icon":"",style:{"margin-bottom":"24px"}},null,8,["type","message","description"]),t[7]||(t[7]=(0,a.Lk)("h4",{style:{"margin-bottom":"16px"}},"详细预测结果",-1)),(0,a.bF)(X,{"data-source":n.result.predictions,size:"small"},{renderItem:(0,a.k6)(({item:e,index:t})=>[(0,a.bF)(E,null,{default:(0,a.k6)(()=>[(0,a.bF)(A,null,{title:(0,a.k6)(()=>[(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.bF)(d,{color:0===t?"blue":"default"},{default:(0,a.k6)(()=>[(0,a.eW)(" #"+(0,b.v_)(e.rank),1)]),_:2},1032,["color"]),(0,a.eW)(" "+(0,b.v_)(e.class),1)]),_:2},1024)]),description:(0,a.k6)(()=>[(0,a.bF)(_,{percent:100*e.confidence,"stroke-color":0===t?"#1890ff":"#d9d9d9",size:"small"},null,8,["percent","stroke-color"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"]),(0,a.bF)(D),(0,a.bF)(U,{title:"识别信息",size:"small",column:1},{default:(0,a.k6)(()=>[(0,a.bF)(P,{label:"使用模型"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)(n.result.model.name),1)]),_:1}),(0,a.bF)(P,{label:"模型类型"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)("binary"===n.result.model.type?"二分类":"多分类"),1)]),_:1}),(0,a.bF)(P,{label:"识别时间"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)(new Date(1e3*n.result.timestamp).toLocaleString()),1)]),_:1})]),_:1})])):(0,a.Q3)("",!0)]),_:1},8,["spinning"])]),_:1})]),_:1})]),_:1})])}var E=l(491),X=l(281),D=l(697),P={name:"SinglePredict",components:{InboxOutlined:E.A,DeleteOutlined:X.A,ThunderboltOutlined:D.A,PictureOutlined:d.A},data(){return{models:[],selectedModel:null,fileList:[],imageUrl:null,imageData:null,predicting:!1,result:null}},computed:{currentModelInfo(){return this.models.find(e=>e.id===this.selectedModel)}},mounted(){this.loadModels(),this.$route.query.model&&(this.selectedModel=this.$route.query.model)},methods:{async loadModels(){try{const e=await F.A.get("/api/models");this.models=e.data.models,!this.selectedModel&&this.models.length>0&&(this.selectedModel=this.models[0].id)}catch(e){this.$message.error("加载模型失败: "+e.message)}},onModelChange(){this.result=null},beforeUpload(e){const t=e.type.startsWith("image/");if(!t)return this.$message.error("只能上传图片文件!"),!1;const l=e.size/1024/1024<10;return l||this.$message.error("图片大小不能超过 10MB!"),!1},handleUpload(e){const t=e.file;"removed"!==t.status&&this.getBase64(t.originFileObj||t,e=>{this.imageUrl=e,this.imageData=e,this.result=null})},getBase64(e,t){const l=new FileReader;l.addEventListener("load",()=>t(l.result)),l.readAsDataURL(e)},clearImage(){this.imageUrl=null,this.imageData=null,this.fileList=[],this.result=null},async predict(){if(this.imageData&&this.selectedModel){this.predicting=!0;try{const e=await F.A.post("/api/predict",{model_id:this.selectedModel,image:this.imageData});this.result=e.data,this.$message.success("识别完成!")}catch(e){this.$message.error("识别失败: "+(e.response?.data?.error||e.message))}finally{this.predicting=!1}}else this.$message.warning("请上传图片并选择模型")}}};const U=(0,g.A)(P,[["render",A],["__scopeId","data-v-3b9f9856"]]);var I=U;const j={key:0,style:{"margin-top":"8px",color:"#666","font-size":"14px"}},R={style:{padding:"40px"}},B={class:"ant-upload-drag-icon"},S={key:0,style:{"margin-top":"16px"}},Q={style:{"margin-top":"16px","text-align":"center"}},T={key:0,style:{"text-align":"center",padding:"60px 20px",color:"#999"}},q={key:0,style:{"text-align":"center",padding:"40px"}},G={key:1},K={style:{height:"200px",overflow:"hidden",display:"flex","align-items":"center","justify-content":"center",background:"#f5f5f5"}},H=["src"],N={key:0},J={style:{color:"#666"}},V={key:1};function Y(e,t,l,i,s,n){const o=(0,a.g2)("a-page-header"),r=(0,a.g2)("a-tag"),d=(0,a.g2)("a-space"),u=(0,a.g2)("a-select-option"),c=(0,a.g2)("a-select"),g=(0,a.g2)("a-card"),p=(0,a.g2)("inbox-outlined"),f=(0,a.g2)("a-upload-dragger"),h=(0,a.g2)("a-button"),m=(0,a.g2)("thunderbolt-outlined"),k=(0,a.g2)("a-col"),y=(0,a.g2)("download-outlined"),F=(0,a.g2)("folder-open-outlined"),v=(0,a.g2)("a-progress"),x=(0,a.g2)("a-alert"),_=(0,a.g2)("a-row"),C=(0,a.g2)("a-divider"),L=(0,a.g2)("a-statistic"),M=(0,a.g2)("a-spin");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(o,{title:"批量识别","sub-title":"上传多张面料图片进行批量智能分类识别",onBack:t[0]||(t[0]=t=>e.$router.go(-1))}),(0,a.bF)(_,{gutter:32},{default:(0,a.k6)(()=>[(0,a.bF)(k,{xs:24,lg:8},{default:(0,a.k6)(()=>[(0,a.bF)(g,{title:"选择模型",style:{"margin-bottom":"24px"}},{default:(0,a.k6)(()=>[(0,a.bF)(c,{value:s.selectedModel,"onUpdate:value":t[1]||(t[1]=e=>s.selectedModel=e),placeholder:"请选择识别模型",style:{width:"100%"},onChange:n.onModelChange},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.models,e=>((0,a.uX)(),(0,a.Wv)(u,{key:e.id,value:e.id},{default:(0,a.k6)(()=>[(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)(r,{color:"binary"===e.type?"blue":"green",size:"small"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)("binary"===e.type?"二分类":"多分类"),1)]),_:2},1032,["color"]),(0,a.eW)(" "+(0,b.v_)(e.name),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["value","onChange"]),n.currentModelInfo?((0,a.uX)(),(0,a.CE)("p",j,(0,b.v_)(n.currentModelInfo.description),1)):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(g,{title:"上传图片"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{fileList:s.fileList,"onUpdate:fileList":t[2]||(t[2]=e=>s.fileList=e),"before-upload":n.beforeUpload,multiple:"",accept:"image/*",onChange:n.handleUpload},{default:(0,a.k6)(()=>[(0,a.Lk)("div",R,[(0,a.Lk)("p",B,[(0,a.bF)(p,{style:{"font-size":"48px",color:"#1890ff"}})]),t[3]||(t[3]=(0,a.Lk)("p",{class:"ant-upload-text"},"点击或拖拽图片到此区域上传",-1)),t[4]||(t[4]=(0,a.Lk)("p",{class:"ant-upload-hint"},"支持多选，JPG、PNG、BMP、WEBP 格式",-1))])]),_:1},8,["fileList","before-upload","onChange"]),s.imageDataList.length>0?((0,a.uX)(),(0,a.CE)("div",S,[(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)(r,{color:"blue"},{default:(0,a.k6)(()=>[(0,a.eW)("已选择 "+(0,b.v_)(s.imageDataList.length)+" 张图片",1)]),_:1}),(0,a.bF)(h,{size:"small",onClick:n.clearImages},{default:(0,a.k6)(()=>[...t[5]||(t[5]=[(0,a.eW)("清空",-1)])]),_:1},8,["onClick"])]),_:1})])):(0,a.Q3)("",!0),(0,a.Lk)("div",Q,[(0,a.bF)(h,{type:"primary",size:"large",loading:s.predicting,disabled:0===s.imageDataList.length||!s.selectedModel,onClick:n.batchPredict},{icon:(0,a.k6)(()=>[(0,a.bF)(m)]),default:(0,a.k6)(()=>[(0,a.eW)(" 批量识别 ("+(0,b.v_)(s.imageDataList.length)+") ",1)]),_:1},8,["loading","disabled","onClick"])])]),_:1})]),_:1}),(0,a.bF)(k,{xs:24,lg:16},{default:(0,a.k6)(()=>[(0,a.bF)(g,{title:"识别结果"},(0,a.eX)({default:(0,a.k6)(()=>[0!==s.results.length||s.predicting?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",T,[(0,a.bF)(F,{style:{"font-size":"64px","margin-bottom":"16px"}}),t[8]||(t[8]=(0,a.Lk)("p",null,"请上传图片并选择模型进行批量识别",-1))])),(0,a.bF)(M,{spinning:s.predicting,style:{width:"100%"}},{default:(0,a.k6)(()=>[s.predicting?((0,a.uX)(),(0,a.CE)("div",q,[(0,a.Lk)("p",null,"正在处理 "+(0,b.v_)(s.imageDataList.length)+" 张图片...",1),(0,a.bF)(v,{percent:Math.round(s.processedCount/s.imageDataList.length*100)},null,8,["percent"])])):(0,a.Q3)("",!0),s.results.length>0?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.bF)(_,{gutter:[16,16]},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.results,(e,t)=>((0,a.uX)(),(0,a.Wv)(k,{xs:24,sm:12,lg:8,key:t},{default:(0,a.k6)(()=>[(0,a.bF)(g,{size:"small",hoverable:""},{cover:(0,a.k6)(()=>[(0,a.Lk)("div",K,[(0,a.Lk)("img",{src:s.imageDataList[e.index],style:{"max-width":"100%","max-height":"100%","object-fit":"contain"}},null,8,H)])]),default:(0,a.k6)(()=>[e.success?((0,a.uX)(),(0,a.CE)("div",N,[(0,a.bF)(d,{direction:"vertical",style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(r,{color:e.prediction.confidence>.8?"green":e.prediction.confidence>.6?"orange":"blue"},{default:(0,a.k6)(()=>[(0,a.eW)((0,b.v_)(e.prediction.class),1)]),_:2},1032,["color"]),(0,a.bF)(v,{percent:100*e.prediction.confidence,size:"small","stroke-color":e.prediction.confidence>.8?"#52c41a":e.prediction.confidence>.6?"#faad14":"#1890ff"},null,8,["percent","stroke-color"]),(0,a.Lk)("small",J," 置信度: "+(0,b.v_)((100*e.prediction.confidence).toFixed(1))+"% ",1)]),_:2},1024)])):((0,a.uX)(),(0,a.CE)("div",V,[(0,a.bF)(x,{type:"error",message:e.error,size:"small"},null,8,["message"])]))]),_:2},1024)]),_:2},1024))),128))]),_:1}),(0,a.bF)(C),(0,a.bF)(_,{gutter:32},{default:(0,a.k6)(()=>[(0,a.bF)(k,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(L,{title:"总计",value:s.results.length,suffix:"张"},null,8,["value"])]),_:1}),(0,a.bF)(k,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(L,{title:"成功",value:n.successCount,suffix:"张"},null,8,["value"])]),_:1}),(0,a.bF)(k,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(L,{title:"失败",value:n.failCount,suffix:"张"},null,8,["value"])]),_:1}),(0,a.bF)(k,{xs:24,md:6},{default:(0,a.k6)(()=>[(0,a.bF)(L,{title:"成功率",value:n.successRate,suffix:"%"},null,8,["value"])]),_:1})]),_:1})])):(0,a.Q3)("",!0)]),_:1},8,["spinning"])]),_:2},[s.results.length>0?{name:"extra",fn:(0,a.k6)(()=>[(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)(h,{size:"small",onClick:n.exportResults},{icon:(0,a.k6)(()=>[(0,a.bF)(y)]),default:(0,a.k6)(()=>[t[6]||(t[6]=(0,a.eW)(" 导出结果 ",-1))]),_:1},8,["onClick"]),(0,a.bF)(h,{size:"small",onClick:n.clearResults},{default:(0,a.k6)(()=>[...t[7]||(t[7]=[(0,a.eW)("清空结果",-1)])]),_:1},8,["onClick"])]),_:1})]),key:"0"}:void 0]),1024)]),_:1})]),_:1})])}var Z=l(79),ee={name:"BatchPredict",components:{InboxOutlined:E.A,ThunderboltOutlined:D.A,FolderOpenOutlined:u.A,DownloadOutlined:Z.A},data(){return{models:[],selectedModel:null,fileList:[],imageDataList:[],predicting:!1,results:[],processedCount:0}},computed:{currentModelInfo(){return this.models.find(e=>e.id===this.selectedModel)},successCount(){return this.results.filter(e=>e.success).length},failCount(){return this.results.filter(e=>!e.success).length},successRate(){return this.results.length>0?Math.round(this.successCount/this.results.length*100):0}},mounted(){this.loadModels(),this.$route.query.model&&(this.selectedModel=this.$route.query.model)},methods:{async loadModels(){try{const e=await F.A.get("/api/models");this.models=e.data.models,!this.selectedModel&&this.models.length>0&&(this.selectedModel=this.models[0].id)}catch(e){this.$message.error("加载模型失败: "+e.message)}},onModelChange(){this.results=[]},beforeUpload(e){const t=e.type.startsWith("image/");if(!t)return this.$message.error("只能上传图片文件!"),!1;const l=e.size/1024/1024<10;return l||this.$message.error("图片大小不能超过 10MB!"),!1},handleUpload(e){const t=e.fileList.map(e=>e.originFileObj||e);this.processFiles(t)},processFiles(e){this.imageDataList=[];const t=e.map(e=>new Promise(t=>{const l=new FileReader;l.onload=e=>t(e.target.result),l.readAsDataURL(e)}));Promise.all(t).then(e=>{this.imageDataList=e,this.results=[]})},clearImages(){this.fileList=[],this.imageDataList=[],this.results=[]},clearResults(){this.results=[]},async batchPredict(){if(0!==this.imageDataList.length&&this.selectedModel){this.predicting=!0,this.processedCount=0;try{const e=await F.A.post("/api/batch_predict",{model_id:this.selectedModel,images:this.imageDataList});this.results=e.data.results,this.processedCount=this.imageDataList.length,this.$message.success(`批量识别完成! 成功: ${this.successCount}, 失败: ${this.failCount}`)}catch(e){this.$message.error("批量识别失败: "+(e.response?.data?.error||e.message))}finally{this.predicting=!1}}else this.$message.warning("请上传图片并选择模型")},exportResults(){if(0===this.results.length)return;const e=[["序号","预测类别","置信度","状态"],...this.results.map((e,t)=>[t+1,e.success?e.prediction.class:"识别失败",e.success?(100*e.prediction.confidence).toFixed(2)+"%":"-",e.success?"成功":e.error])].map(e=>e.join(",")).join("\n"),t=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download=`批量识别结果_${(new Date).toISOString().slice(0,19).replace(/:/g,"-")}.csv`,l.click()}}};const te=(0,g.A)(ee,[["render",Y],["__scopeId","data-v-56888e29"]]);var le=te;const ie=[{path:"/",name:"Home",component:_},{path:"/single",name:"SinglePredict",component:I},{path:"/batch",name:"BatchPredict",component:le}],ae=(0,h.aE)({history:(0,h.LA)(""),routes:ie});var se=ae,ne=l(867);l(529);const oe=(0,i.Ef)(f);oe.use(se),oe.use(ne.Ay),oe.mount("#app")}},t={};function l(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,l),s.exports}l.m=e,function(){var e=[];l.O=function(t,i,a,s){if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],s=e[u][2];for(var o=!0,r=0;r<i.length;r++)(!1&s||n>=s)&&Object.keys(l.O).every(function(e){return l.O[e](i[r])})?i.splice(r--,1):(o=!1,s<n&&(n=s));if(o){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,a,s]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,n=i[0],o=i[1],r=i[2],d=0;if(n.some(function(t){return 0!==e[t]})){for(a in o)l.o(o,a)&&(l.m[a]=o[a]);if(r)var u=r(l)}for(t&&t(i);d<n.length;d++)s=n[d],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(u)},i=self["webpackChunkfabric_classifier_demo"]=self["webpackChunkfabric_classifier_demo"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=l.O(void 0,[504],function(){return l(369)});i=l.O(i)})();
//# sourceMappingURL=app.7f6ece3c.js.map